<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Schatting Belastingen & Toeslagen 2026 (NL)</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 1000px; margin: 20px auto; padding: 20px; background: #f8f9fa; line-height: 1.5; }
    h1, h2 { color: #003c71; }
    label { display: block; margin: 10px 0 4px; font-weight: bold; }
    input, select { width: 100%; padding: 8px; box-sizing: border-box; font-size: 1em; }
    button { margin: 20px 0; padding: 12px 24px; background: #003c71; color: white; border: none; cursor: pointer; font-size: 1.1em; }
    button:hover { background: #002850; }
    #result { margin-top: 30px; padding: 20px; background: white; border: 1px solid #ccc; border-radius: 8px; }
    .section { margin-bottom: 30px; border-bottom: 1px solid #ddd; padding-bottom: 20px; }
    .disclaimer { font-size: 0.9em; color: #555; margin-top: 40px; padding: 15px; background: #fff3cd; border: 1px solid #ffeeba; border-radius: 6px; }
    table { width: 100%; border-collapse: collapse; margin: 15px 0; }
    th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
    th { background: #e9ecef; }
    .hidden { display: none; }
    .child-age-group { margin-top: 10px; }
  </style>
</head>
<body>

<h1>Schatting Belastingen & Toeslagen 2026</h1>
<p>Vul je gegevens in voor een schatting van box 1/3 belasting (incl. AHK, AK, IACK), heffingskortingen en toeslagen. Gebaseerd op officiële 2026-tabellen.</p>

<div class="section">
  <h2>Persoonlijke situatie</h2>
  <label>Fiscaal partner?</label>
  <select id="partner" onchange="togglePartnerFields()">
    <option value="nee">Nee (alleenstaand)</option>
    <option value="ja">Ja</option>
  </select>

  <div id="partnerAges" class="hidden">
    <label>Leeftijd partner 1 (in 2026)</label>
    <input type="number" id="leeftijdPartner1" min="0" max="120" value="40">

    <label>Leeftijd partner 2 (in 2026)</label>
    <input type="number" id="leeftijdPartner2" min="0" max="120" value="40">
  </div>

  <label>Aantal kinderen onder 18 jaar</label>
  <input type="number" id="kinderen" min="0" max="10" value="0" onchange="generateChildAges()">

  <div id="childAges"></div>

  <label>WOZ-waarde woning (peildatum 1-1-2025, €)</label>
  <input type="number" id="woz" min="0" value="0">

  <label>Huurt u? (anders geen huurtoeslag)</label>
  <select id="huurt" onchange="toggleHuurSection()">
    <option value="nee">Nee</option>
    <option value="ja">Ja</option>
  </select>
</div>

<div class="section hidden" id="huurSection">
  <h2>Wonen & Huur</h2>
  <label>Kale huur per maand (€, excl. servicekosten)</label>
  <input type="number" id="huur" min="0" value="700">

  <label>Leeftijd hoofd-huurder</label>
  <select id="huurLeeftijd">
    <option value="onder21">Onder 21</option>
    <option value="21plus" selected>21 of ouder</option>
  </select>
</div>

<div class="section">
  <h2>Inkomen & Loon (box 1)</h2>
  <label>Bruto jaarloon partner 1 (€)</label>
  <input type="number" id="brutoloon1" min="0" value="40000">

  <div id="partner2Inkomen" class="hidden">
    <label>Bruto jaarloon partner 2 (€)</label>
    <input type="number" id="brutoloon2" min="0" value="0">
  </div>

  <label>Betaalde loonbelasting partner 1 (€, schatting)</label>
  <input type="number" id="loonbel1" min="0" value="8000">

  <div id="partner2Loonbel" class="hidden">
    <label>Betaalde loonbelasting partner 2 (€, schatting)</label>
    <input type="number" id="loonbel2" min="0" value="0">
  </div>

  <label>Betaalde rente hypotheek gedurende het jaar (€, totaal)</label>
  <input type="number" id="hypotheekrente" min="0" value="0">
</div>

<div class="section">
  <h2>Vermogen (box 3, peildatum 1 jan 2026)</h2>
  <label>Bank- & spaartegoeden (€)</label>
  <input type="number" id="spaargeld" min="0" value="10000">

  <label>Beleggingen / overig vermogen (€, aandelen, 2e huis etc.)</label>
  <input type="number" id="overigVermogen" min="0" value="0">

  <label>Schulden (niet eigenwoning, >€3.400 drempel)</label>
  <input type="number" id="schulden" min="0" value="0">
</div>

<div class="section">
  <h2>Kinderopvang</h2>
  <label>Totaal kinderopvangkosten per jaar (€)</label>
  <input type="number" id="opvangJaar" min="0" value="0">
</div>

<button onclick="bereken()">Bereken schatting 2026</button>

<div id="result"></div>

<div class="disclaimer">
  <strong>Disclaimer – Dit is GEEN officiële berekening!</strong><br>
  Alleen een schatting op basis van bekende 2026-regels (jan 2026). Geen rekening met alle aftrekken, eigenwoningforfait exact, alleenstaande-ouderkorting, etc. Gebruik altijd de officiële proefberekening op <a href="https://www.belastingdienst.nl/rekenhulpen" target="_blank">belastingdienst.nl</a> of <a href="https://www.toeslagen.nl/proefberekening" target="_blank">toeslagen.nl</a>. Resultaten kunnen sterk afwijken.
</div>

<script>
function togglePartnerFields() {
  const partner = document.getElementById('partner').value === 'ja';
  document.getElementById('partnerAges').classList.toggle('hidden', !partner);
  document.getElementById('partner2Inkomen').classList.toggle('hidden', !partner);
  document.getElementById('partner2Loonbel').classList.toggle('hidden', !partner);
}

function generateChildAges() {
  const num = parseInt(document.getElementById('kinderen').value) || 0;
  const container = document.getElementById('childAges');
  container.innerHTML = '';
  for (let i = 1; i <= num; i++) {
    const div = document.createElement('div');
    div.className = 'child-age-group';
    div.innerHTML = `
      <label>Leeftijd kind ${i} (in 2026)</label>
      <input type="number" class="childLeeftijd" min="0" max="17" value="10">
    `;
    container.appendChild(div);
  }
}

function toggleHuurSection() {
  const huurt = document.getElementById('huurt').value;
  document.getElementById('huurSection').classList.toggle('hidden', huurt !== 'ja');
}

function berekenEigenwoningforfait(woz) {
  if (woz <= 12500) return 0;
  if (woz <= 25000) return woz * 0.0010;
  if (woz <= 50000) return woz * 0.0020;
  if (woz <= 75000) return woz * 0.0025;
  if (woz <= 1350000) return woz * 0.0035;
  return 4725 + (woz - 1350000) * 0.0235;
}

function berekenAHK(verzamel, isAOW) {
  const maxAHK = isAOW ? 1556 : 3115;
  const afbouwStart = 29736;
  const afbouwPerc = isAOW ? 0.03195 : 0.06398;
  const afbouwEinde = 78426;
  if (verzamel <= afbouwStart) return maxAHK;
  if (verzamel >= afbouwEinde) return 0;
  return maxAHK - afbouwPerc * (verzamel - afbouwStart);
}

function berekenAK(arbeids, isAOW) {
  const thresholds = [11965, 25845, 45592, 132920];
  const maxAK = isAOW ? 2842.5 : 5685; // approx halve voor AOW
  if (arbeids <= thresholds[0]) return (isAOW ? 0.04156 : 0.08324) * arbeids;
  if (arbeids <= thresholds[1]) return (isAOW ? 498 : 996) + (isAOW ? 0.15483 : 0.31009) * (arbeids - thresholds[0]);
  if (arbeids <= thresholds[2]) return (isAOW ? 2650 : 5300) + (isAOW ? 0.00975 : 0.0195) * (arbeids - thresholds[1]);
  if (arbeids <= thresholds[3]) return maxAK - (isAOW ? 0.03255 : 0.0651) * (arbeids - thresholds[2]);
  return 0;
}

function berekenIACK(lowestArbeids, isAOWLowest) {
  const start = 6239;
  const rate = isAOWLowest ? 0.0572 : 0.1145;
  const maxIACK = isAOWLowest ? 1513 : 3032;
  const end = 32710;
  if (lowestArbeids <= start) return 0;
  if (lowestArbeids >= end) return maxIACK;
  return rate * (lowestArbeids - start);
}

function bereken() {
  const partner = document.getElementById('partner').value === 'ja';
  const brutoloon1 = parseFloat(document.getElementById('brutoloon1').value) || 0;
  const brutoloon2 = partner ? (parseFloat(document.getElementById('brutoloon2').value) || 0) : 0;
  const totaalBrutoLoon = brutoloon1 + brutoloon2;
  const loonbel1 = parseFloat(document.getElementById('loonbel1').value) || 0;
  const loonbel2 = partner ? (parseFloat(document.getElementById('loonbel2').value) || 0) : 0;
  const totaalLoonbel = loonbel1 + loonbel2;
  const hypotheekrente = parseFloat(document.getElementById('hypotheekrente').value) || 0;
  const spaargeld = parseFloat(document.getElementById('spaargeld').value) || 0;
  const overig = parseFloat(document.getElementById('overigVermogen').value) || 0;
  const schulden = parseFloat(document.getElementById('schulden').value) || 0;
  const opvangJaar = parseFloat(document.getElementById('opvangJaar').value) || 0;
  const woz = parseFloat(document.getElementById('woz').value) || 0;
  const huurt = document.getElementById('huurt').value === 'ja';
  const huurMaand = huurt ? (parseFloat(document.getElementById('huur').value) || 0) : 0;
  const huurLeeftijd = huurt ? document.getElementById('huurLeeftijd').value : '';
  const kinderen = parseInt(document.getElementById('kinderen').value) || 0;

  // AOW check per persoon
  const lp1 = parseInt(document.getElementById('leeftijdPartner1').value) || 0;
  const aow1 = lp1 >= 67;
  const lp2 = partner ? parseInt(document.getElementById('leeftijdPartner2').value) || 0 : 0;
  const aow2 = partner ? (lp2 >= 67) : false;

  // Child ages for IACK (<12)
  const childAges = Array.from(document.querySelectorAll('.childLeeftijd')).map(el => parseInt(el.value) || 18);
  const hasYoungChild = childAges.some(age => age < 12);

  let html = '<h2>Resultaat schatting 2026</h2>';

  // Eigenwoningforfait + belastbaar box 1
  const eigenwoningforfait = berekenEigenwoningforfait(woz);
  const belastbaarBox1 = totaalBrutoLoon + eigenwoningforfait - hypotheekrente;

  // Box 1 tarieven (gezamenlijk)
  const ibTarief1 = (aow1 || aow2) ? 0.1785 : 0.3575;
  const ibTarief2 = 0.3756;
  const ibTarief3 = 0.4950;
  const schijf1 = 38883;
  const schijf2 = 78426;

  let ib = 0;
  if (belastbaarBox1 <= schijf1) ib = belastbaarBox1 * ibTarief1;
  else if (belastbaarBox1 <= schijf2) ib = schijf1 * ibTarief1 + (belastbaarBox1 - schijf1) * ibTarief2;
  else ib = schijf1 * ibTarief1 + (schijf2 - schijf1) * ibTarief2 + (belastbaarBox1 - schijf2) * ibTarief3;

  // Box 3
  const vrijstellingBox3 = partner ? 2 * 59357 : 59357;
  const rendementsgrondslag = Math.max(0, spaargeld + overig - schulden - vrijstellingBox3);
  const fictRendement = (spaargeld * 0.0128) + (overig * 0.06) - (schulden * 0.027);
  const box3Inkomen = Math.max(0, fictRendement);
  const box3Belasting = box3Inkomen * 0.36;

  // Verzamelinkomen approx voor kortingen (box 1 + box 3)
  const verzamelTotaal = belastbaarBox1 + box3Inkomen;

  // Kortingen per persoon (AHK over verzamel per persoon approx, AK over bruto loon)
  const share = 1 / (partner ? 2 : 1);
  const verzamelPerPers1 = brutoloon1 + eigenwoningforfait * share - hypotheekrente * share + box3Inkomen * share;
  const verzamelPerPers2 = partner ? (brutoloon2 + eigenwoningforfait * share - hypotheekrente * share + box3Inkomen * share) : 0;

  const ahk1 = berekenAHK(verzamelPerPers1, aow1);
  const ahk2
