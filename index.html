<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Belastingen en Toeslagen Calculator 2026</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState } = React;
    const Calculator = ({ className }) => (<svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="4" y="2" width="16" height="20" rx="2"/><line x1="8" y1="6" x2="16" y2="6"/><line x1="16" y1="14" x2="16" y2="18"/><line x1="12" y1="14" x2="12" y2="18"/><line x1="8" y1="14" x2="8" y2="18"/><line x1="8" y1="10" x2="8" y2="10"/><line x1="12" y1="10" x2="12" y2="10"/><line x1="16" y1="10" x2="16" y2="10"/></svg>);
    const Users = ({ className }) => (<svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>);
    const Home = ({ className }) => (<svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>);
    const Baby = ({ className }) => (<svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M9 12h.01"/><path d="M15 12h.01"/><path d="M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5"/><path d="M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1"/></svg>);
    const Euro = ({ className }) => (<svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M4 10h12"/><path d="M4 14h9"/><path d="M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12a7.9 7.9 0 0 0 7.8 8 7.7 7.7 0 0 0 5.2-2"/></svg>);
    const TrendingUp = ({ className }) => (<svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/><polyline points="17 6 23 6 23 12"/></svg>);
    const FileText = ({ className }) => (<svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>);

    function BelastingCalculator() {
      const [fiscaalPartner, setFiscaalPartner] = useState(false);
      const [aantalKinderen, setAantalKinderen] = useState(0);
      const [kinderenLeeftijden, setKinderenLeeftijden] = useState([]);
      const [kindOpvang, setKindOpvang] = useState([]); // [{uren: number, type: 'dagopvang'|'bso'|'gastouder'}]
      const [wozWaarde, setWozWaarde] = useState('');
      const [brutoLoon, setBrutoLoon] = useState('');
      const [brutoLoonPartner, setBrutoLoonPartner] = useState('');
      const [eigenWoningRente, setEigenWoningRente] = useState('');
      const [eigenWoningRentePartner, setEigenWoningRentePartner] = useState('');
      const [arbeidsongeschiktheid, setArbeidsongeschiktheid] = useState('');
      const [arbeidsongeschiktheidPartner, setArbeidsongeschiktheidPartner] = useState('');
      const [bankrekeningen, setBankrekeningen] = useState('');
      const [bankrekeningenPartner, setBankrekeningenPartner] = useState('');
      const [beleggingen, setBeleggingen] = useState('');
      const [beleggingenPartner, setBeleggingenPartner] = useState('');
      const [schulden, setSchulden] = useState('');
      const [schuldenPartner, setSchuldenPartner] = useState('');
      const [ingehoudenLoonheffing, setIngehoudenLoonheffing] = useState('');
      const [ingehoudenLoonheffingPartner, setIngehoudenLoonheffingPartner] = useState('');
      const [resultaten, setResultaten] = useState(null);
      const [activeTab, setActiveTab] = useState('stamgegevens');

      const updateAantalKinderen = (aantal) => {
        setAantalKinderen(aantal);
        const nieuweLeeftijden = Array(aantal).fill(10);
        const nieuweOpvang = Array(aantal).fill({uren: 0, type: 'dagopvang'});
        setKinderenLeeftijden(nieuweLeeftijden);
        setKindOpvang(nieuweOpvang);
      };

      const updateKindLeeftijd = (index, leeftijd) => {
        const nieuwe = [...kinderenLeeftijden];
        nieuwe[index] = parseInt(leeftijd) || 0;
        setKinderenLeeftijden(nieuwe);
      };

      const updateKindOpvangUren = (index, uren) => {
        const nieuwe = [...kindOpvang];
        nieuwe[index] = { ...nieuwe[index], uren: parseInt(uren) || 0 };
        setKindOpvang(nieuwe);
      };

      const updateKindOpvangType = (index, type) => {
        const nieuwe = [...kindOpvang];
        nieuwe[index] = { ...nieuwe[index], type };
        setKindOpvang(nieuwe);
      };

      const eigenwoningforfait = (woz) => {
        const w = parseFloat(woz) || 0;
        if (w <= 75000) return 0;
        if (w <= 1350000) return w * 0.0035;
        return 4725 + (w - 1350000) * 0.0235;
      };

      const berekenBox1 = (brutoInkomen, eigenwoningRente, ao, woz) => {
        const inkomen = parseFloat(brutoInkomen) || 0;
        const rente = parseFloat(eigenwoningRente) || 0;
        const aoVerzekering = parseFloat(ao) || 0;
        const ewf = eigenwoningforfait(woz);
        const box1Inkomen = inkomen - rente - aoVerzekering + ewf;
        let belasting = 0;
        if (box1Inkomen > 78426) {
          belasting += (box1Inkomen - 78426) * 0.495;
          belasting += (78426 - 38883) * 0.3756;
          belasting += 38883 * 0.3575;
        } else if (box1Inkomen > 38883) {
          belasting += (box1Inkomen - 38883) * 0.3756;
          belasting += 38883 * 0.3575;
        } else if (box1Inkomen > 0) {
          belasting += box1Inkomen * 0.3575;
        }
        return { box1Inkomen, belasting };
      };

      const berekenBox3 = (bank1, beleg1, schuld1, bank2 = 0, beleg2 = 0, schuld2 = 0) => {
  const bank = (parseFloat(bank1) || 0) + (parseFloat(bank2) || 0);
  const beleg = (parseFloat(beleg1) || 0) + (parseFloat(beleg2) || 0);
  const schuld = (parseFloat(schuld1) || 0) + (parseFloat(schuld2) || 0);

  const heffingsVrij = fiscaalPartner ? 118714 : 59357;     // 2026-bedragen
  const schuldDrempel = fiscaalPartner ? 7600 : 3800;

  const totaalBezittingen = bank + beleg;
  const nettoSchuldCorrectie = Math.max(0, schuld - schuldDrempel);

  const belastbaarVermogen = Math.max(0, totaalBezittingen - heffingsVrij - nettoSchuldCorrectie);

  let belastbaarRendement = 0;

  if (belastbaarVermogen > 0) {
    // Verdeling van het belastbare vermogen over de categorieën (pro rata)
    const totaalBruto = bank + beleg + nettoSchuldCorrectie; // schuld telt negatief mee in rendement

    if (totaalBruto > 0) {
      const fractieBank = bank / totaalBruto;
      const fractieBeleg = beleg / totaalBruto;
      // fractieSchuld = nettoSchuldCorrectie / totaalBruto; (negatief effect)

      const rendBankDeel     = belastbaarVermogen * fractieBank * 0.0128;
      const rendBelegDeel    = belastbaarVermogen * fractieBeleg * 0.06;
      const rendSchuldDeel   = nettoSchuldCorrectie * 0.027; // schuld blijft apart

      belastbaarRendement = rendBankDeel + rendBelegDeel - rendSchuldDeel;
      belastbaarRendement = Math.max(0, belastbaarRendement);
    }
  }

  const box3Belasting = belastbaarRendement * 0.36;

  return {
    belastbaarVermogen,
    belastbaarRendement,
    box3Belasting
  };
};
      const berekenHeffingskortingen = (verzamelinkomen, arbeidsinkomen) => {
        let ahk = 3115;
        if (verzamelinkomen > 29736) {
          const afbouw = (verzamelinkomen - 29736) * 0.06398;
          ahk = Math.max(0, ahk - afbouw);
        }
        let ak = 0;
        if (arbeidsinkomen > 0) {
          if (arbeidsinkomen <= 11491) {
            ak = arbeidsinkomen * 0.08425;
          } else if (arbeidsinkomen <= 25142) {
            ak = 968 + (arbeidsinkomen - 11491) * 0.34503;
          } else if (arbeidsinkomen <= 45592) {
            ak = 5685;
          } else if (arbeidsinkomen <= 132920) {
            ak = Math.max(0, 5685 - (arbeidsinkomen - 45592) * 0.0651);
          }
        }
        return { ahk, ak };
      };

      const berekenIACK = (arbeidsinkomen) => {
        const ai = parseFloat(arbeidsinkomen) || 0;
        if (ai <= 6239) return 0;
        return Math.min(3032, 0.1145 * (ai - 6239));
      };

      const berekenKindgebondenBudget = (toetsInkomen, aantal) => {
        if (aantal === 0) return 0;
        let maxBedrag = 2580 * aantal; // basis per kind
        const drempel = fiscaalPartner ? 39141 : 29736;
        if (toetsInkomen <= drempel) return maxBedrag;
        const vermindering = (toetsInkomen - drempel) * 0.076;
        return Math.max(0, maxBedrag - vermindering);
      };

      const berekenKinderopvangtoeslag = (toetsInkomen, opvangDetails) => {
        let percEerste = 0.96; // max percentage eerste kind
        if (toetsInkomen > 56413) {
          percEerste = Math.max(0.33, 0.96 - (toetsInkomen - 56413) / 10000 * 0.1); // vereenvoudigde afbouw
        }
        const percVolgend = percEerste; // vereenvoudigd, eigenlijk lagere percentages voor volgende kinderen
        let totaal = 0;
        // Sorteer op uren om hoogste uren eerste kind toe te wijzen
        const gesorteerd = [...opvangDetails].sort((a, b) => b.uren - a.uren);
        gesorteerd.forEach((opv, index) => {
          const urenMaand = Math.min(opv.uren || 0, 230);
          const urenJaar = urenMaand * 12;
          let maxPrijs = 0;
          if (opv.type === 'dagopvang') maxPrijs = 9.12; // 2026 waarden approx
          if (opv.type === 'bso') maxPrijs = 8.17;
          if (opv.type === 'gastouder') maxPrijs = 7.24;
          const perc = index === 0 ? percEerste : percVolgend;
          totaal += urenJaar * maxPrijs * perc;
        });
        return totaal;
      };

      const berekenKinderbijslag = (leeftijden) => {
        let totaalJaar = 0;
        const details = [];
        leeftijden.forEach((leeftijd, index) => {
          let kwartaalBedrag = 0;
          let percentage = '';
          if (leeftijd >= 0 && leeftijd <= 5) {
            kwartaalBedrag = 295.07;
            percentage = '70%';
          } else if (leeftijd >= 6 && leeftijd <= 11) {
            kwartaalBedrag = 358.30;
            percentage = '85%';
          } else if (leeftijd >= 12 && leeftijd <= 17) {
            kwartaalBedrag = 421.53;
            percentage = '100%';
          }
          const jaarBedrag = kwartaalBedrag * 4;
          totaalJaar += jaarBedrag;
          details.push({kind: index + 1, leeftijd, percentage, kwartaal: kwartaalBedrag, jaar: jaarBedrag});
        });
        return { totaalJaar, details };
      };

      const berekenAlles = () => {
        const wozNum = parseFloat(wozWaarde) || 0;
        const box1P1 = berekenBox1(brutoLoon, eigenWoningRente, arbeidsongeschiktheid, wozNum);
        const box1P2 = fiscaalPartner ? berekenBox1(brutoLoonPartner, eigenWoningRentePartner, arbeidsongeschiktheidPartner, 0) : { box1Inkomen: 0, belasting: 0 };
        const totaalBox1Inkomen = box1P1.box1Inkomen + box1P2.box1Inkomen;
        const totaalBox1Belasting = box1P1.belasting + box1P2.belasting;
        const box3 = berekenBox3(bankrekeningen, beleggingen, schulden, bankrekeningenPartner, beleggingenPartner, schuldenPartner);
        const totaalBox3Belasting = box3.box3Belasting;
        const kortingen1 = berekenHeffingskortingen(totaalBox1Inkomen, parseFloat(brutoLoon) || 0);
        const kortingen2 = fiscaalPartner ? berekenHeffingskortingen(totaalBox1Inkomen, parseFloat(brutoLoonPartner) || 0) : { ahk: 0, ak: 0 };
        const iack1 = berekenIACK(parseFloat(brutoLoon) || 0);
        const iack2 = fiscaalPartner ? berekenIACK(parseFloat(brutoLoonPartner) || 0) : 0;
        const iackTotaal = aantalKinderen > 0 ? Math.max(iack1, iack2) : 0;
        const totaalHeffingskortingen = kortingen1.ahk + kortingen1.ak + kortingen2.ahk + kortingen2.ak + iackTotaal;
        const brutoBelasting = totaalBox1Belasting + totaalBox3Belasting;
        const nettoBelasting = Math.max(0, brutoBelasting - totaalHeffingskortingen);
        const totaalIngehoudenLoonheffing = (parseFloat(ingehoudenLoonheffing) || 0) + (parseFloat(ingehoudenLoonheffingPartner) || 0);
        const teBetalenOntvangen = totaalIngehoudenLoonheffing - nettoBelasting;
        const kindgebondenBudget = berekenKindgebondenBudget(totaalBox1Inkomen, aantalKinderen);
        const kinderbijslag = berekenKinderbijslag(kinderenLeeftijden);
        const kinderopvangtoeslag = berekenKinderopvangtoeslag(totaalBox1Inkomen, kindOpvang);
        setResultaten({
          persoon1: {box1: box1P1, kortingen: kortingen1, iack: iack1},
          persoon2: {box1: box1P2, kortingen: kortingen2, iack: iack2},
          box3: box3,
          totaal: {box1Inkomen: totaalBox1Inkomen, box1Belasting: totaalBox1Belasting, box3Belasting: totaalBox3Belasting, brutoBelasting, heffingskortingen: totaalHeffingskortingen, nettoBelasting, ingehoudenLoonheffing: totaalIngehoudenLoonheffing, teBetalenOntvangen, kindgebondenBudget, kinderbijslag, kinderopvangtoeslag, verzamelinkomen: totaalBox1Inkomen}
        });
        setActiveTab('resultaten');
      };

      const formatEuro = (bedrag) => new Intl.NumberFormat('nl-NL', { style: 'currency', currency: 'EUR' }).format(bedrag);

      return (
        <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4">
          <div className="max-w-6xl mx-auto">
            <div className="bg-white rounded-2xl shadow-2xl overflow-hidden">
              <div className="bg-gradient-to-r from-blue-600 to-indigo-700 p-6 text-white">
                <div className="flex items-center gap-3 mb-2">
                  <Calculator className="w-8 h-8" />
                  <h1 className="text-3xl font-bold">Belasting en Toeslagen Calculator 2026</h1>
                </div>
                <p className="text-blue-100">Bereken uw Nederlandse belasting en toeslagen voor het jaar 2026</p>
              </div>
              <div className="border-b border-gray-200">
                <div className="flex">
                  <button onClick={() => setActiveTab('stamgegevens')} className={'flex-1 px-6 py-4 font-semibold transition-colors ' + (activeTab === 'stamgegevens' ? 'bg-blue-50 text-blue-700 border-b-2 border-blue-700' : 'text-gray-600 hover:bg-gray-50')}><Users className="inline mr-2 w-5 h-5" />Stamgegevens</button>
                  <button onClick={() => setActiveTab('box1')} className={'flex-1 px-6 py-4 font-semibold transition-colors ' + (activeTab === 'box1' ? 'bg-blue-50 text-blue-700 border-b-2 border-blue-700' : 'text-gray-600 hover:bg-gray-50')}><Euro className="inline mr-2 w-5 h-5" />Box 1</button>
                  <button onClick={() => setActiveTab('box3')} className={'flex-1 px-6 py-4 font-semibold transition-colors ' + (activeTab === 'box3' ? 'bg-blue-50 text-blue-700 border-b-2 border-blue-700' : 'text-gray-600 hover:bg-gray-50')}><TrendingUp className="inline mr-2 w-5 h-5" />Box 3</button>
                  <button onClick={() => setActiveTab('resultaten')} className={'flex-1 px-6 py-4 font-semibold transition-colors ' + (activeTab === 'resultaten' ? 'bg-blue-50 text-blue-700 border-b-2 border-blue-700' : 'text-gray-600 hover:bg-gray-50')}><FileText className="inline mr-2 w-5 h-5" />Resultaten</button>
                </div>
              </div>
              <div className="p-6">
                {activeTab === 'stamgegevens' && (
                  <div className="space-y-6">
                    <h2 className="text-2xl font-bold text-gray-800 mb-4">Stamgegevens</h2>
                    <div className="bg-blue-50 border-l-4 border-blue-600 p-4 rounded">
                      <label className="flex items-center space-x-3 cursor-pointer">
                        <input type="checkbox" checked={fiscaalPartner} onChange={(e) => setFiscaalPartner(e.target.checked)} className="w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500" />
                        <span className="font-semibold text-gray-800">Fiscaal partner</span>
                      </label>
                    </div>
                    <div>
                      <label className="block text-sm font-semibold text-gray-700 mb-2"><Baby className="inline w-4 h-4 mr-1" />Aantal kinderen</label>
                      <input type="number" min="0" value={aantalKinderen} onChange={(e) => updateAantalKinderen(parseInt(e.target.value) || 0)} className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" />
                    </div>
                    {aantalKinderen > 0 && (
                      <div className="bg-purple-50 p-4 rounded-lg space-y-3">
                        <h3 className="font-semibold text-gray-800">Leeftijden kinderen (voor kinderbijslag)</h3>
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                          {Array.from({ length: aantalKinderen }).map((_, index) => (
                            <div key={index}>
                              <label className="block text-sm font-medium text-gray-700 mb-2">Leeftijd kind {index + 1} (0-17 jaar)</label>
                              <input type="number" min="0" max="17" value={kinderenLeeftijden[index] || ''} onChange={(e) => updateKindLeeftijd(index, e.target.value)} className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="Bijv. 10" />
                            </div>
                          ))}
                        </div>
                      </div>
                    )}
                    {aantalKinderen > 0 && (
                      <div className="bg-teal-50 p-4 rounded-lg space-y-3">
                        <h3 className="font-semibold text-gray-800">Kinderopvang (uren per maand en type)</h3>
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                          {Array.from({ length: aantalKinderen }).map((_, index) => (
                            <div key={index} className="space-y-2">
                              <label className="block text-sm font-medium text-gray-700">Kind {index + 1} - Uren per maand (max 230)</label>
                              <input type="number" min="0" max="230" value={kindOpvang[index]?.uren || ''} onChange={(e) => updateKindOpvangUren(index, e.target.value)} className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="Bijv. 40" />
                              <label className="block text-sm font-medium text-gray-700">Type opvang</label>
                              <select value={kindOpvang[index]?.type || 'dagopvang'} onChange={(e) => updateKindOpvangType(index, e.target.value)} className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                <option value="dagopvang">Dagopvang</option>
                                <option value="bso">BSO</option>
                                <option value="gastouder">Gastouder</option>
                              </select>
                            </div>
                          ))}
                        </div>
                      </div>
                    )}
                    <div className="bg-gray-50 p-4 rounded-lg space-y-4">
                      <h3 className="font-semibold text-gray-800 flex items-center"><Home className="w-5 h-5 mr-2" />WOZ-waarde eigen woning</h3>
                      <div><label className="block text-sm font-medium text-gray-700 mb-2">WOZ-waarde (€)</label><input type="number" value={wozWaarde} onChange={(e) => setWozWaarde(e.target.value)} placeholder="Bijv. 350000" className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" /></div>
                    </div>
                  </div>
                )}
                {activeTab === 'box1' && (
                  <div className="space-y-6">
                    <h2 className="text-2xl font-bold text-gray-800 mb-4">Box 1: Inkomsten uit werk en woning</h2>
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                      <div className="space-y-4 bg-blue-50 p-6 rounded-lg">
                        <h3 className="font-bold text-lg text-gray-800">Persoon 1</h3>
                        <div><label className="block text-sm font-semibold text-gray-700 mb-2">Brutoloon (€)</label><input type="number" value={brutoLoon} onChange={(e) => setBrutoLoon(e.target.value)} className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="50000" /></div>
                        <div><label className="block text-sm font-semibold text-gray-700 mb-2">Betaalde hypotheekrente (€)</label><input type="number" value={eigenWoningRente} onChange={(e) => setEigenWoningRente(e.target.value)} className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="8000" /></div>
                        <div><label className="block text-sm font-semibold text-gray-700 mb-2">Arbeidsongeschiktheidsverzekering (€)</label><input type="number" value={arbeidsongeschiktheid} onChange={(e) => setArbeidsongeschiktheid(e.target.value)} className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="2000" /></div>
                        <div><label className="block text-sm font-semibold text-gray-700 mb-2">Ingehouden loonheffing (€)</label><input type="number" value={ingehoudenLoonheffing} onChange={(e) => setIngehoudenLoonheffing(e.target.value)} className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="15000" /></div>
                      </div>
                      {fiscaalPartner && (
                        <div className="space-y-4 bg-indigo-50 p-6 rounded-lg">
                          <h3 className="font-bold text-lg text-gray-800">Persoon 2 (Partner)</h3>
                          <div><label className="block text-sm font-semibold text-gray-700 mb-2">Brutoloon (€)</label><input type="number" value={brutoLoonPartner} onChange={(e) => setBrutoLoonPartner(e.target.value)} className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="40000" /></div>
                          <div><label className="block text-sm font-semibold text-gray-700 mb-2">Betaalde hypotheekrente (€)</label><input type="number" value={eigenWoningRentePartner} onChange={(e) => setEigenWoningRentePartner(e.target.value)} className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="0" /></div>
                          <div><label className="block text-sm font-semibold text-gray-700 mb-2">Arbeidsongeschiktheidsverzekering (€)</label><input type="number" value={arbeidsongeschiktheidPartner} onChange={(e) => setArbeidsongeschiktheidPartner(e.target.value)} className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="0" /></div>
                          <div><label className="block text-sm font-semibold text-gray-700 mb-2">Ingehouden loonheffing (€)</label><input type="number" value={ingehoudenLoonheffingPartner} onChange={(e) => setIngehoudenLoonheffingPartner(e.target.value)} className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="12000" /></div>
                        </div>
                      )}
                    </div>
                  </div>
                )}
                {activeTab === 'box3' && (
                  <div className="space-y-6">
                    <h2 className="text-2xl font-bold text-gray-800 mb-4">Box 3: Sparen en beleggen</h2>
                    <p className="text-sm text-gray-600 mb-4">Peildatum: 1 januari 2026</p>
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                      <div className="space-y-4 bg-blue-50 p-6 rounded-lg">
                        <h3 className="font-bold text-lg text-gray-800">Persoon 1</h3>
                        <div><label className="block text-sm font-semibold text-gray-700 mb-2">Bankrekeningen (€)</label><input type="number" value={bankrekeningen} onChange={(e) => setBankrekeningen(e.target.value)} className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="30000" /><p className="text-xs text-gray-500 mt-1">Rendement: 1,28%</p></div>
                        <div><label className="block text-sm font-semibold text-gray-700 mb-2">Beleggingen (€)</label><input type="number" value={beleggingen} onChange={(e) => setBeleggingen(e.target.value)} className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="50000" /><p className="text-xs text-gray-500 mt-1">Rendement: 6,00%</p></div>
                        <div><label className="block text-sm font-semibold text-gray-700 mb-2">Schulden (€)</label><input type="number" value={schulden} onChange={(e) => setSchulden(e.target.value)} className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="10000" /><p className="text-xs text-gray-500 mt-1">Rendement: 2,70% (na drempel €3.800)</p></div>
                      </div>
                      {fiscaalPartner && (
                        <div className="space-y-4 bg-indigo-50 p-6 rounded-lg">
                          <h3 className="font-bold text-lg text-gray-800">Persoon 2 (Partner)</h3>
                          <div><label className="block text-sm font-semibold text-gray-700 mb-2">Bankrekeningen (€)</label><input type="number" value={bankrekeningenPartner} onChange={(e) => setBankrekeningenPartner(e.target.value)} className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="20000" /><p className="text-xs text-gray-500 mt-1">Rendement: 1,28%</p></div>
                          <div><label className="block text-sm font-semibold text-gray-700 mb-2">Beleggingen (€)</label><input type="number" value={beleggingenPartner} onChange={(e) => setBeleggingenPartner(e.target.value)} className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="30000" /><p className="text-xs text-gray-500 mt-1">Rendement: 6,00%</p></div>
                          <div><label className="block text-sm font-semibold text-gray-700 mb-2">Schulden (€)</label><input type="number" value={schuldenPartner} onChange={(e) => setSchuldenPartner(e.target.value)} className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="5000" /><p className="text-xs text-gray-500 mt-1">Rendement: 2,70% (na drempel €3.800)</p></div>
                        </div>
                      )}
                    </div>
                    <div className="bg-yellow-50 border-l-4 border-yellow-500 p-4 rounded"><p className="text-sm text-gray-700"><strong>Let op:</strong> Heffingsvrij vermogen is €57.684 per persoon (gezamenlijk €115.368 bij partner). Schuldendrempel €3.800 per persoon (€7.600 bij partner).</p></div>
                  </div>
                )}
                {activeTab === 'resultaten' && resultaten && (
                  <div className="space-y-6">
                    <h2 className="text-2xl font-bold text-gray-800 mb-4">Berekening Resultaten 2026</h2>
                    <div className="bg-blue-50 p-6 rounded-lg">
                      <h3 className="text-xl font-bold text-gray-800 mb-4">Box 1: Inkomsten uit werk en woning</h3>
                      <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div><p className="text-sm text-gray-600">Persoon 1 - Box 1 inkomen:</p><p className="text-lg font-semibold">{formatEuro(resultaten.persoon1.box1.box1Inkomen)}</p><p className="text-sm text-gray-600 mt-2">Persoon 1 - Box 1 belasting:</p><p className="text-lg font-semibold">{formatEuro(resultaten.persoon1.box1.belasting)}</p></div>
                        {fiscaalPartner && (<div><p className="text-sm text-gray-600">Persoon 2 - Box 1 inkomen:</p><p className="text-lg font-semibold">{formatEuro(resultaten.persoon2.box1.box1Inkomen)}</p><p className="text-sm text-gray-600 mt-2">Persoon 2 - Box 1 belasting:</p><p className="text-lg font-semibold">{formatEuro(resultaten.persoon2.box1.belasting)}</p></div>)}
                      </div>
                      <div className="mt-4 pt-4 border-t border-blue-200"><p className="text-sm text-gray-600">Totaal Box 1 belasting:</p><p className="text-2xl font-bold text-blue-700">{formatEuro(resultaten.totaal.box1Belasting)}</p></div>
                      <div className="mt-4"><p className="text-sm text-gray-600">Heffingskortingen:</p><p className="text-lg font-semibold">{formatEuro(resultaten.totaal.heffingskortingen)}</p></div>
                      <div className="mt-4"><p className="text-sm text-gray-600">Ingehouden loonheffing:</p><p className="text-lg font-semibold">{formatEuro(resultaten.totaal.ingehoudenLoonheffing)}</p></div>
                    </div>
                    <div className="bg-green-50 p-6 rounded-lg">
                      <h3 className="text-xl font-bold text-gray-800 mb-4">Box 3: Sparen en beleggen</h3>
                      <p className="text-sm text-gray-600">Belastbaar vermogen:</p><p className="text-lg font-semibold">{formatEuro(resultaten.box3.belastbaarVermogen)}</p>
                      <p className="text-sm text-gray-600 mt-2">Box 3 belasting:</p><p className="text-lg font-semibold">{formatEuro(resultaten.box3.box3Belasting)}</p>
                    </div>
                    <div className="bg-purple-50 p-6 rounded-lg">
                      <h3 className="text-xl font-bold text-gray-800 mb-4">Heffingskortingen</h3>
                      <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div><p className="text-sm text-gray-600">Persoon 1 - Algemene heffingskorting:</p><p className="text-lg font-semibold">{formatEuro(resultaten.persoon1.kortingen.ahk)}</p><p className="text-sm text-gray-600 mt-2">Persoon 1 - Arbeidskorting:</p><p className="text-lg font-semibold">{formatEuro(resultaten.persoon1.kortingen.ak)}</p><p className="text-sm text-gray-600 mt-2">Persoon 1 - IACK:</p><p className="text-lg font-semibold">{formatEuro(resultaten.persoon1.iack)}</p></div>
                        {fiscaalPartner && (<div><p className="text-sm text-gray-600">Persoon 2 - Algemene heffingskorting:</p><p className="text-lg font-semibold">{formatEuro(resultaten.persoon2.kortingen.ahk)}</p><p className="text-sm text-gray-600 mt-2">Persoon 2 - Arbeidskorting:</p><p className="text-lg font-semibold">{formatEuro(resultaten.persoon2.kortingen.ak)}</p><p className="text-sm text-gray-600 mt-2">Persoon 2 - IACK:</p><p className="text-lg font-semibold">{formatEuro(resultaten.persoon2.iack)}</p></div>)}
                      </div>
                      <div className="mt-4 pt-4 border-t border-purple-200"><p className="text-sm text-gray-600">Totaal heffingskortingen:</p><p className="text-2xl font-bold text-purple-700">{formatEuro(resultaten.totaal.heffingskortingen)}</p></div>
                    </div>
                    {aantalKinderen > 0 && (<>
                      <div className="bg-pink-50 p-6 rounded-lg"><h3 className="text-xl font-bold text-gray-800 mb-4"><Baby className="inline w-6 h-6 mr-2" />Kindgebonden budget</h3><p className="text-sm text-gray-600">Jaarlijks kindgebonden budget ({aantalKinderen} {aantalKinderen === 1 ? 'kind' : 'kinderen'}):</p><p className="text-2xl font-bold text-pink-700">{formatEuro(resultaten.totaal.kindgebondenBudget)}</p><p className="text-xs text-gray-500 mt-2">Dit bedrag ontvangt u maandelijks via de Belastingdienst Toeslagen</p></div>
                      <div className="bg-indigo-50 p-6 rounded-lg"><h3 className="text-xl font-bold text-gray-800 mb-4"><Baby className="inline w-6 h-6 mr-2" />Kinderbijslag</h3><p className="text-sm text-gray-600 mb-3">Kinderbijslag per kind (uitbetaald per kwartaal door SVB):</p><div className="space-y-2 mb-4">{resultaten.totaal.kinderbijslag.details.map((detail) => (<div key={detail.kind} className="flex justify-between text-sm bg-white p-2 rounded"><span>Kind {detail.kind} ({detail.leeftijd} jaar, {detail.percentage}):</span><span className="font-semibold">{formatEuro(detail.kwartaal)} /kwartaal</span></div>))}</div><div className="pt-3 border-t border-indigo-200"><p className="text-sm text-gray-600">Totaal kinderbijslag per jaar:</p><p className="text-2xl font-bold text-indigo-700">{formatEuro(resultaten.totaal.kinderbijslag.totaalJaar)}</p></div></div>
                      <div className="bg-teal-50 p-6 rounded-lg"><h3 className="text-xl font-bold text-gray-800 mb-4"><Baby className="inline w-6 h-6 mr-2" />Kinderopvangtoeslag</h3><p className="text-sm text-gray-600">Jaarlijkse kinderopvangtoeslag:</p><p className="text-2xl font-bold text-teal-700">{formatEuro(resultaten.totaal.kinderopvangtoeslag)}</p><p className="text-xs text-gray-500 mt-2">Gebaseerd op ingevoerde uren en type opvang</p></div>
                    </>)}
                    <div className="bg-gradient-to-r from-blue-600 to-indigo-700 p-6 rounded-lg text-white">
                      <h3 className="text-2xl font-bold mb-6">Eindresultaat Aangifte 2026</h3>
                      <div className="space-y-3">
                        <div className="flex justify-between items-center"><span>Bruto belasting (Box 1 + Box 3):</span><span className="text-xl font-bold">{formatEuro(resultaten.totaal.brutoBelasting)}</span></div>
                        <div className="flex justify-between items-center"><span>Totaal heffingskortingen:</span><span className="text-xl font-bold">- {formatEuro(resultaten.totaal.heffingskortingen)}</span></div>
                        <div className="border-t border-blue-400 pt-3 flex justify-between items-center"><span className="font-semibold">Netto te betalen belasting:</span><span className="text-xl font-bold">{formatEuro(resultaten.totaal.nettoBelasting)}</span></div>
                        <div className="flex justify-between items-center"><span>Ingehouden loonheffing:</span><span className="text-xl font-bold">{formatEuro(resultaten.totaal.ingehoudenLoonheffing)}</span></div>
                        <div className="border-t-2 border-white pt-4 mt-4"><div className="flex justify-between items-center"><span className="text-xl font-bold">{resultaten.totaal.teBetalenOntvangen >= 0 ? 'Te ontvangen:' : 'Te betalen:'}</span><span className={'text-3xl font-bold ' + (resultaten.totaal.teBetalenOntvangen >= 0 ? 'text-green-300' : 'text-red-300')}>{formatEuro(Math.abs(resultaten.totaal.teBetalenOntvangen))}</span></div></div>
                      </div>
                    </div>
                    <div className="bg-gray-50 p-6 rounded-lg"><h3 className="text-xl font-bold text-gray-800 mb-4">Samenvatting</h3><ul className="space-y-2 text-sm text-gray-700"><li>• Te {resultaten.totaal.teBetalenOntvangen >= 0 ? 'ontvangen' : 'betalen'} Belastingdienst: <span className={resultaten.totaal.teBetalenOntvangen >= 0 ? 'text-green-700' : 'text-red-700'}>{formatEuro(Math.abs(resultaten.totaal.teBetalenOntvangen))}</span></li>{aantalKinderen > 0 && (<><li>• Kinderopvangtoeslag (jaarlijks): {formatEuro(resultaten.totaal.kinderopvangtoeslag)}</li><li>• Kindgebonden budget (jaarlijks): {formatEuro(resultaten.totaal.kindgebondenBudget)}</li><li>• Kinderbijslag (jaarlijks): {formatEuro(resultaten.totaal.kinderbijslag.totaalJaar)}</li></>)}</ul></div>
                  </div>
                )}
                {activeTab === 'resultaten' && !resultaten && (<div className="text-center py-12"><Calculator className="w-16 h-16 mx-auto text-gray-400 mb-4" /><p className="text-gray-600 text-lg mb-2">Nog geen berekening uitgevoerd</p><p className="text-gray-500 text-sm">Vul eerst alle gegevens in en klik op Bereken belasting</p></div>)}
              </div>
              {activeTab !== 'resultaten' && (<div className="bg-gray-50 px-6 py-4 border-t border-gray-200"><button onClick={berekenAlles} className="w-full bg-gradient-to-r from-blue-600 to-indigo-700 text-white px-8 py-4 rounded-lg font-bold text-lg hover:from-blue-700 hover:to-indigo-800 transition-all shadow-lg hover:shadow-xl"><Calculator className="inline w-6 h-6 mr-2" />Bereken belasting en toeslagen</button></div>)}
            </div>
            <div className="mt-6 text-center text-sm text-gray-600 bg-white p-4 rounded-lg shadow"><p><strong>Disclaimer:</strong> Deze calculator is bedoeld voor indicatieve doeleinden. De werkelijke belasting kan afwijken. Voor officiële berekeningen, raadpleeg de Belastingdienst of een belastingadviseur.</p><p className="mt-2 text-xs">Tarieven en regelgeving 2026 zijn gebaseerd op beschikbare informatie per januari 2026.</p></div>
          </div>
        </div>
      );
    }
    ReactDOM.render(<BelastingCalculator />, document.getElementById('root'));
  </script>
</body>
</html>
