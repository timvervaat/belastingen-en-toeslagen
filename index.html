<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Schatting Belastingen & Toeslagen 2026 (NL)</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 1000px; margin: 20px auto; padding: 20px; background: #f8f9fa; line-height: 1.5; }
    h1, h2 { color: #003c71; }
    label { display: block; margin: 10px 0 4px; font-weight: bold; }
    input, select { width: 100%; padding: 8px; box-sizing: border-box; font-size: 1em; }
    button { margin: 20px 0; padding: 12px 24px; background: #003c71; color: white; border: none; cursor: pointer; font-size: 1.1em; }
    button:hover { background: #002850; }
    #result { margin-top: 30px; padding: 20px; background: white; border: 1px solid #ccc; border-radius: 8px; }
    .section { margin-bottom: 30px; border-bottom: 1px solid #ddd; padding-bottom: 20px; }
    .disclaimer { font-size: 0.9em; color: #555; margin-top: 40px; padding: 15px; background: #fff3cd; border: 1px solid #ffeeba; border-radius: 6px; }
    table { width: 100%; border-collapse: collapse; margin: 15px 0; }
    th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
    th { background: #e9ecef; }
    .hidden { display: none; }
    .child-age-group { margin-top: 10px; }
  </style>
</head>
<body>

<h1>Schatting Belastingen & Toeslagen 2026</h1>
<p>Vul je gegevens in voor een schatting van box 1/3 belasting (incl. AHK, AK, IACK), heffingskortingen en toeslagen. Gebaseerd op officiële 2026-tabellen (jan 2026).</p>

<div class="section">
  <h2>Persoonlijke situatie</h2>
  <label>Fiscaal partner?</label>
  <select id="partner" onchange="togglePartnerFields()">
    <option value="nee">Nee (alleenstaand)</option>
    <option value="ja">Ja</option>
  </select>

  <div id="partnerAges" class="hidden">
    <label>Leeftijd partner 1 (in 2026)</label>
    <input type="number" id="leeftijdPartner1" min="0" max="120" value="40">

    <label>Leeftijd partner 2 (in 2026)</label>
    <input type="number" id="leeftijdPartner2" min="0" max="120" value="40">
  </div>

  <label>Aantal kinderen onder 18 jaar</label>
  <input type="number" id="kinderen" min="0" max="10" value="0" onchange="generateChildAges()">

  <div id="childAges"></div>

  <label>WOZ-waarde woning (peildatum 1-1-2025, €)</label>
  <input type="number" id="woz" min="0" value="0">

  <label>Huurt u? (anders geen huurtoeslag)</label>
  <select id="huurt" onchange="toggleHuurSection()">
    <option value="nee">Nee</option>
    <option value="ja">Ja</option>
  </select>
</div>

<div class="section hidden" id="huurSection">
  <h2>Wonen & Huur</h2>
  <label>Kale huur per maand (€, excl. servicekosten)</label>
  <input type="number" id="huur" min="0" value="700">

  <label>Leeftijd hoofd-huurder</label>
  <select id="huurLeeftijd">
    <option value="onder21">Onder 21</option>
    <option value="21plus" selected>21 of ouder</option>
  </select>
</div>

<div class="section">
  <h2>Inkomen & Loon (box 1)</h2>
  <label>Bruto jaarloon partner 1 (€)</label>
  <input type="number" id="brutoloon1" min="0" value="40000">

  <div id="partner2Inkomen" class="hidden">
    <label>Bruto jaarloon partner 2 (€)</label>
    <input type="number" id="brutoloon2" min="0" value="0">
  </div>

  <label>Betaalde loonbelasting partner 1 (€, schatting)</label>
  <input type="number" id="loonbel1" min="0" value="8000">

  <div id="partner2Loonbel" class="hidden">
    <label>Betaalde loonbelasting partner 2 (€, schatting)</label>
    <input type="number" id="loonbel2" min="0" value="0">
  </div>

  <label>Betaalde rente hypotheek gedurende het jaar (€, totaal)</label>
  <input type="number" id="hypotheekrente" min="0" value="0">
</div>

<div class="section">
  <h2>Vermogen (box 3, peildatum 1 jan 2026)</h2>
  <label>Bank- & spaartegoeden (€)</label>
  <input type="number" id="spaargeld" min="0" value="10000">

  <label>Beleggingen / overig vermogen (€, aandelen, 2e huis etc.)</label>
  <input type="number" id="overigVermogen" min="0" value="0">

  <label>Schulden (niet eigenwoning, >€3.400 drempel)</label>
  <input type="number" id="schulden" min="0" value="0">
</div>

<div class="section">
  <h2>Kinderopvang</h2>
  <label>Totaal kinderopvangkosten per jaar (€)</label>
  <input type="number" id="opvangJaar" min="0" value="0">
</div>

<button onclick="bereken()">Bereken schatting 2026</button>

<div id="result"></div>

<div class="disclaimer">
  <strong>Disclaimer – Dit is GEEN officiële berekening!</strong><br>
  Alleen een schatting op basis van bekende 2026-regels (jan 2026). Geen rekening met alle aftrekken, eigenwoningforfait exact, alleenstaande-ouderkorting, etc. Gebruik altijd de officiële proefberekening op <a href="https://www.belastingdienst.nl/rekenhulpen" target="_blank">belastingdienst.nl</a> of <a href="https://www.toeslagen.nl/proefberekening" target="_blank">toeslagen.nl</a>. Resultaten kunnen sterk afwijken.
</div>

<script>
function togglePartnerFields() {
  const partner = document.getElementById('partner').value === 'ja';
  document.getElementById('partnerAges').classList.toggle('hidden', !partner);
  document.getElementById('partner2Inkomen').classList.toggle('hidden', !partner);
  document.getElementById('partner2Loonbel').classList.toggle('hidden', !partner);
}

function generateChildAges() {
  const num = parseInt(document.getElementById('kinderen').value) || 0;
  const container = document.getElementById('childAges');
  container.innerHTML = '';
  for (let i = 1; i <= num; i++) {
    const div = document.createElement('div');
    div.className = 'child-age-group';
    div.innerHTML = `
      <label>Leeftijd kind ${i} (in 2026)</label>
      <input type="number" class="childLeeftijd" min="0" max="17" value="10">
    `;
    container.appendChild(div);
  }
}

function toggleHuurSection() {
  const huurt = document.getElementById('huurt').value;
  document.getElementById('huurSection').classList.toggle('hidden', huurt !== 'ja');
}

function berekenEigenwoningforfait(woz) {
  if (woz <= 12500) return 0;
  if (woz <= 25000) return woz * 0.0010;
  if (woz <= 50000) return woz * 0.0020;
  if (woz <= 75000) return woz * 0.0025;
  if (woz <= 1350000) return woz * 0.0035;
  return 4725 + (woz - 1350000) * 0.0235;
}

function berekenAHK(verzamel, isAOW) {
  const maxAHK = isAOW ? 1556 : 3115;
  const afbouwStart = 28406;
  const afbouwPerc = isAOW ? 0.03195 : 0.06337;
  const afbouwEinde = 76817;
  if (verzamel <= afbouwStart) return maxAHK;
  if (verzamel >= afbouwEinde) return 0;
  return maxAHK - afbouwPerc * (verzamel - afbouwStart);
}

function berekenAK(arbeids, isAOW) {
  if (arbeids <= 12169) return 0.08053 * arbeids;
  if (arbeids <= 26288) return 980 + 0.3003 * (arbeids - 12169);
  if (arbeids <= 43071) return 5220 + 0.02258 * (arbeids - 26288);
  if (arbeids <= 129078) return 5599 - 0.0651 * (arbeids - 43071);
  return 0;
}

function berekenIACK(lowestArbeids) {
  const start = 6145;
  const end = 32223;
  const maxIACK = 2986;
  const rate = 0.1145;
  if (lowestArbeids <= start) return 0;
  if (lowestArbeids >= end) return maxIACK;
  return rate * (lowestArbeids - start);
}

function bereken() {
  const partner = document.getElementById('partner').value === 'ja';
  const brutoloon1 = parseFloat(document.getElementById('brutoloon1').value) || 0;
  const brutoloon2 = partner ? (parseFloat(document.getElementById('brutoloon2').value) || 0) : 0;
  const totaalBrutoLoon = brutoloon1 + brutoloon2;
  const loonbel1 = parseFloat(document.getElementById('loonbel1').value) || 0;
  const loonbel2 = partner ? (parseFloat(document.getElementById('loonbel2').value) || 0) : 0;
  const totaalLoonbel = loonbel1 + loonbel2;
  const hypotheekrente = parseFloat(document.getElementById('hypotheekrente').value) || 0;
  const spaargeld = parseFloat(document.getElementById('spaargeld').value) || 0;
  const overig = parseFloat(document.getElementById('overigVermogen').value) || 0;
  const schulden = parseFloat(document.getElementById('schulden').value) || 0;
  const opvangJaar = parseFloat(document.getElementById('opvangJaar').value) || 0;
  const woz = parseFloat(document.getElementById('woz').value) || 0;
  const huurt = document.getElementById('huurt').value === 'ja';
  const huurMaand = huurt ? (parseFloat(document.getElementById('huur').value) || 0) : 0;
  const huurLeeftijd = huurt ? document.getElementById('huurLeeftijd').value : '';
  const kinderen = parseInt(document.getElementById('kinderen').value) || 0;

  // AOW check per persoon
  const lp1 = parseInt(document.getElementById('leeftijdPartner1').value) || 0;
  const aow1 = lp1 >= 67;
  const lp2 = partner ? parseInt(document.getElementById('leeftijdPartner2').value) || 0 : 0;
  const aow2 = partner ? (lp2 >= 67) : false;

  // Child ages for IACK (<12)
  const childAges = Array.from(document.querySelectorAll('.childLeeftijd')).map(el => parseInt(el.value) || 18);
  const hasYoungChild = childAges.some(age => age < 12);

  let html = '<h2>Resultaat schatting 2026</h2>';

  // Eigenwoningforfait + belastbaar box 1
  const eigenwoningforfait = berekenEigenwoningforfait(woz);
  const belastbaarBox1 = totaalBrutoLoon + eigenwoningforfait - hypotheekrente;

  // Box 1 tarieven (gezamenlijk)
  const ibTarief1 = (aow1 || aow2) ? 0.1785 : 0.3575;
  const ibTarief2 = 0.3756;
  const ibTarief3 = 0.4950;
  const schijf1 = 38883;
  const schijf2 = 78426;

  let ib = 0;
  if (belastbaarBox1 <= schijf1) ib = belastbaarBox1 * ibTarief1;
  else if (belastbaarBox1 <= schijf2) ib = schijf1 * ibTarief1 + (belastbaarBox1 - schijf1) * ibTarief2;
  else ib = schijf1 * ibTarief1 + (schijf2 - schijf1) * ibTarief2 + (belastbaarBox1 - schijf2) * ibTarief3;

  // Box 3
  const vrijstellingBox3 = partner ? 2 * 59357 : 59357;
  const rendementsgrondslag = Math.max(0, spaargeld + overig - schulden - vrijstellingBox3);
  const fictRendement = (spaargeld * 0.0128) + (overig * 0.06) - (schulden * 0.027);
  const box3Inkomen = Math.max(0, fictRendement);
  const box3Belasting = box3Inkomen * 0.36;

  // Verzamelinkomen approx voor kortingen (box 1 + box 3)
  const verzamelTotaal = belastbaarBox1 + box3Inkomen;

  // Kortingen per persoon
  const share = 1 / (partner ? 2 : 1);
  const verzamelPerPers1 = brutoloon1 + eigenwoningforfait * share - hypotheekrente * share + box3Inkomen * share;
  const verzamelPerPers2 = partner ? (brutoloon2 + eigenwoningforfait * share - hypotheekrente * share + box3Inkomen * share) : 0;

  const ahk1 = berekenAHK(verzamelPerPers1, aow1);
  const ahk2 = partner ? berekenAHK(verzamelPerPers2, aow2) : 0;
  const totalAHK = ahk1 + ahk2;

  const ak1 = berekenAK(brutoloon1, aow1);
  const ak2 = partner ? berekenAK(brutoloon2, aow2) : 0;
  const totalAK = ak1 + ak2;

  // IACK: alleen minstverdienende als jong kind
  let iack = 0;
  if (hasYoungChild) {
    let lowestArbeids = Math.min(brutoloon1, brutoloon2 || Infinity);
    let isAOWLowest = (lowestArbeids === brutoloon1 ? aow1 : aow2);
    iack = berekenIACK(lowestArbeids, isAOWLowest);
  }

  const totalKortingen = totalAHK + totalAK + iack;

  // Te betalen box 1
  const teBetalenBox1 = Math.max(0, ib - totalKortingen - totaalLoonbel);

  let toetsInkomen = verzamelTotaal; // ruw voor toeslagen

  html += `<p><b>Box 1 bruto belasting (incl. eigenwoningforfait €${Math.round(eigenwoningforfait)}):</b> €${Math.round(ib).toLocaleString('nl-NL')}</p>`;
  html += `<p><b>Algemene heffingskorting (totaal):</b> €${Math.round(totalAHK).toLocaleString('nl-NL')}</p>`;
  html += `<p><b>Arbeidskorting (totaal):</b> €${Math.round(totalAK).toLocaleString('nl-NL')}</p>`;
  html += `<p><b>Inkomensafhankelijke combinatiekorting (IACK):</b> €${Math.round(iack).toLocaleString('nl-NL')}</p>`;
  html += `<p><b>Box 1 na kortingen en voorheffingen:</b> €${Math.round(teBetalenBox1).toLocaleString('nl-NL')}</p>`;

  html += `<p><b>Box 3 vermogensrendementsheffing:</b> €${Math.round(box3Belasting).toLocaleString('nl-NL')}</p>`;

  // Zorgtoeslag
  let zorgMaxMaand = partner ? 246 : 129;
  let zorgGrens = partner ? 51142 : 40857;
  let zorg = 0;
  if (toetsInkomen < 29500) zorg = zorgMaxMaand * 12;
  else if (toetsInkomen < zorgGrens) {
    let afbouw = (toetsInkomen - 29500) / (zorgGrens - 29500);
    zorg = zorgMaxMaand * 12 * (1 - afbouw * 0.8);
  }
  html += `<p><b>Zorgtoeslag schatting (jaar):</b> €${Math.round(zorg).toLocaleString('nl-NL')}</p>`;

  // Huurtoeslag
  let huurtoeslag = 0;
  if (huurt) {
    let maxHuur = (huurLeeftijd === 'onder21') ? 498.20 : 932.93;
    let rekenHuur = Math.min(huurMaand, maxHuur);
    let huurtoeslagMaand = 0;
    if (rekenHuur > 200 && toetsInkomen < (partner ? 60000 : 45000) + kinderen*5000) {
      huurtoeslagMaand = Math.max(0, (rekenHuur * 12 - 3000) * 0.4 - toetsInkomen * 0.15) / 12;
    }
    huurtoeslag = huurtoeslagMaand * 12;
    html += `<p><b>Huurtoeslag schatting (jaar):</b> €${Math.round(huurtoeslag).toLocaleString('nl-NL')}</p>`;
  }

  // Kinderopvangtoeslag
  let opvangToeslag = 0;
  if (opvangJaar > 0 && toetsInkomen < 140000) {
    let perc = 0.96;
    if (toetsInkomen > 56000) perc -= (toetsInkomen - 56000) / 100000 * 0.63;
    perc = Math.max(0.33, perc);
    opvangToeslag = opvangJaar * perc;
  }
  html += `<p><b>Kinderopvangtoeslag schatting (jaar):</b> €${Math.round(opvangToeslag).toLocaleString('nl-NL')}</p>`;

  // Totaal
  let totaalToeslagen = zorg + huurtoeslag + opvangToeslag;
  let nettoBelasting = teBetalenBox1 + box3Belasting - totaalToeslagen;

  html += `<hr><h3>Totaaloverzicht</h3>
  <table>
    <tr><th>Omschrijving</th><th>Bedrag (€/jaar)</th></tr>
    <tr><td>Toeslagen totaal</td><td>+${Math.round(totaalToeslagen).toLocaleString('nl-NL')}</td></tr>
    <tr><td>Belasting box 1 + 3 schatting</td><td>-${Math.round(teBetalenBox1 + box3Belasting).toLocaleString('nl-NL')}</td></tr>
    <tr><td><b>Netto schatting (belasting min toeslagen)</b></td><td><b>${Math.round(nettoBelasting).toLocaleString('nl-NL')}</b></td></tr>
  </table>`;

  document.getElementById('result').innerHTML = html;
}

// Initieel laden
window.onload = function() {
  togglePartnerFields();
  generateChildAges();
  toggleHuurSection();
};
</script>
</body>
</html>
